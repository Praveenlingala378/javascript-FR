<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Face Recognition API Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
        }
        .endpoint {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            margin-right: 10px;
        }
        .get { background: #28a745; }
        .post { background: #007bff; }
        .delete { background: #dc3545; }
        .code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 10px;
            font-family: monospace;
            overflow-x: auto;
        }
        .example {
            background: #e7f3ff;
            border: 1px solid #b3d7ff;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† Face Recognition API Documentation</h1>
        <p>Complete REST API for face detection, training, and recognition using face-api.js</p>
        
        <h2>üìã Base URL</h2>
        <div class="code">http://localhost:3001</div>
        
        <h2>üöÄ Quick Start for Postman</h2>
        <ol>
            <li>Install dependencies: <code>npm install</code></li>
            <li>Start server: <code>npm start</code></li>
            <li>Import the endpoints below into Postman</li>
            <li>Test with image files</li>
        </ol>

        <h2>üì° API Endpoints</h2>

        <!-- Health Check -->
        <div class="endpoint">
            <h3><span class="method get">GET</span>/api/health</h3>
            <p><strong>Description:</strong> Check API status and model loading status</p>
            
            <h4>Response:</h4>
            <div class="code">
{
  "status": "OK",
  "message": "Face Recognition API is running",
  "modelsLoaded": {
    "faceDetector": true,
    "faceLandmarks": true,
    "faceRecognition": true,
    "faceExpression": true
  },
  "registeredFaces": 2
}
            </div>
        </div>

        <!-- Face Detection -->
        <div class="endpoint">
            <h3><span class="method post">POST</span>/api/detect</h3>
            <p><strong>Description:</strong> Detect faces in an image with landmarks and expressions</p>
            
            <h4>Request:</h4>
            <table>
                <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
                <tr><td>image</td><td>File</td><td>Image file (JPG, PNG)</td></tr>
            </table>
            
            <div class="example">
                <strong>Postman Setup:</strong><br>
                1. Method: POST<br>
                2. URL: http://localhost:3001/api/detect<br>
                3. Body ‚Üí form-data<br>
                4. Key: "image" (File type)<br>
                5. Value: Select image file
            </div>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "facesDetected": 1,
  "faces": [
    {
      "faceId": 0,
      "confidence": 0.9876,
      "box": { "x": 100, "y": 50, "width": 150, "height": 180 },
      "landmarks": 68,
      "expressions": {
        "happy": 0.85,
        "neutral": 0.12,
        "sad": 0.03
      }
    }
  ]
}
            </div>
        </div>

        <!-- Train Face -->
        <div class="endpoint">
            <h3><span class="method post">POST</span>/api/train</h3>
            <p><strong>Description:</strong> Register/train a face with a name</p>
            
            <h4>Request:</h4>
            <table>
                <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
                <tr><td>image</td><td>File</td><td>Image file with clear face</td></tr>
                <tr><td>name</td><td>String</td><td>Person's name</td></tr>
            </table>
            
            <div class="example">
                <strong>Postman Setup:</strong><br>
                1. Method: POST<br>
                2. URL: http://localhost:3001/api/train<br>
                3. Body ‚Üí form-data<br>
                4. Key: "image" (File type) ‚Üí Select image<br>
                5. Key: "name" (Text) ‚Üí Enter person's name
            </div>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "message": "Face registered for John",
  "totalDescriptors": 1,
  "totalPeople": 1
}
            </div>
        </div>

        <!-- Recognize Faces -->
        <div class="endpoint">
            <h3><span class="method post">POST</span>/api/recognize</h3>
            <p><strong>Description:</strong> Recognize trained faces in an image</p>
            
            <h4>Request:</h4>
            <table>
                <tr><th>Parameter</th><th>Type</th><th>Description</th></tr>
                <tr><td>image</td><td>File</td><td>Image file to analyze</td></tr>
            </table>
            
            <div class="example">
                <strong>Postman Setup:</strong><br>
                1. Method: POST<br>
                2. URL: http://localhost:3001/api/recognize<br>
                3. Body ‚Üí form-data<br>
                4. Key: "image" (File type) ‚Üí Select image
            </div>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "facesDetected": 1,
  "faces": [
    {
      "faceId": 0,
      "box": { "x": 100, "y": 50, "width": 150, "height": 180 },
      "recognition": {
        "name": "John",
        "confidence": 87,
        "distance": 0.13,
        "isMatch": true
      }
    }
  ]
}
            </div>
        </div>

        <!-- Get All Faces -->
        <div class="endpoint">
            <h3><span class="method get">GET</span>/api/faces</h3>
            <p><strong>Description:</strong> Get list of all registered faces</p>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "totalPeople": 2,
  "faces": [
    { "name": "John", "descriptors": 1 },
    { "name": "Sarah", "descriptors": 2 }
  ]
}
            </div>
        </div>

        <!-- Delete Face -->
        <div class="endpoint">
            <h3><span class="method delete">DELETE</span>/api/faces/:name</h3>
            <p><strong>Description:</strong> Remove a specific person from recognition</p>
            
            <div class="example">
                <strong>Postman Setup:</strong><br>
                1. Method: DELETE<br>
                2. URL: http://localhost:3001/api/faces/John
            </div>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "message": "John removed from face recognition",
  "remainingPeople": 1
}
            </div>
        </div>

        <!-- Clear All Faces -->
        <div class="endpoint">
            <h3><span class="method delete">DELETE</span>/api/faces</h3>
            <p><strong>Description:</strong> Clear all registered faces</p>
            
            <h4>Response:</h4>
            <div class="code">
{
  "success": true,
  "message": "All registered faces cleared"
}
            </div>
        </div>

        <h2>üß™ Testing Workflow</h2>
        <ol>
            <li><strong>Health Check:</strong> GET /api/health</li>
            <li><strong>Train Faces:</strong> POST /api/train (with different people's photos)</li>
            <li><strong>Test Detection:</strong> POST /api/detect (with any photo)</li>
            <li><strong>Test Recognition:</strong> POST /api/recognize (with photos of trained people)</li>
            <li><strong>Manage Faces:</strong> GET /api/faces, DELETE /api/faces/:name</li>
        </ol>

        <h2>üìù Error Responses</h2>
        <div class="code">
{
  "error": "Error description",
  "details": "Detailed error message"
}
        </div>

        <h2>üí° Tips for Best Results</h2>
        <ul>
            <li>Use clear, well-lit photos</li>
            <li>Face should be clearly visible and front-facing</li>
            <li>Train multiple photos of the same person for better accuracy</li>
            <li>Supported formats: JPG, PNG</li>
            <li>Max file size: 10MB</li>
        </ul>
    </div>
</body>
</html>